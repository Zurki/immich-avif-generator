services:
  avif-generator:
    build: .
    container_name: avif-generator
    restart: unless-stopped
    ports:
      - "3000:3000"
    volumes:
      # Persist data (original images, AVIF files, and database)
      - ./data:/app/data
    environment:
      # Required
      - IMMICH_URL=https://your-immich-server.com
      - IMMICH_API_KEY=your-api-key-here
      - IMMICH_ALBUMS=album-uuid-1,album-uuid-2

      # Optional
      - STORAGE_PATH=/app/data
      - SERVER_HOST=0.0.0.0
      - SERVER_PORT=3000
      - SYNC_DELETE_REMOVED=false
      - SYNC_PARALLEL_DOWNLOADS=4
      - SYNC_PARALLEL_CONVERSIONS=2
      - RUST_LOG=info
